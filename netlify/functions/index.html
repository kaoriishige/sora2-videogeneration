<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Sora2API Video Generator</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #output { margin-top: 20px; padding: 10px; border: 1px solid #ccc; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h2>Netlify Function å‘¼ã³å‡ºã—ãƒ†ã‚¹ãƒˆ</h2>
    
    <label for="promptInput">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:</label><br>
    <textarea id="promptInput" rows="3" cols="50">A cat skateboarding in space with neon stars.</textarea><br><br>
    
    <button id="generateButton">å‹•ç”»ç”Ÿæˆã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</button>
    
    <h3>Functionsã‹ã‚‰ã®å¿œç­”:</h3>
    <div id="output"></div>

    <script>
        document.getElementById('generateButton').addEventListener('click', async () => {
            const prompt = document.getElementById('promptInput').value;
            const outputDiv = document.getElementById('output');
            
            outputDiv.innerHTML = 'ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¸­... ğŸš€';

            // ğŸ’¡ å‘¼ã³å‡ºã™Netlify Functionã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
            // å®Ÿéš›ã«ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸã‚ãªãŸã®ã‚µã‚¤ãƒˆã®URLã«ãªã‚Šã¾ã™
            const functionEndpoint = '/.netlify/functions/generate_video'; 

            try {
                // Fetch APIã‚’ä½¿ã£ã¦POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
                const response = await fetch(functionEndpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ prompt: prompt })
                });

                const data = await response.json();
                
                if (response.ok) {
                    outputDiv.innerHTML = `âœ… æˆåŠŸ:\n${JSON.stringify(data, null, 2)}`;
                    outputDiv.style.backgroundColor = '#e6ffe6';
                } else {
                    outputDiv.innerHTML = `âŒ ã‚¨ãƒ©ãƒ¼ (${response.status}):\n${JSON.stringify(data, null, 2)}`;
                    outputDiv.style.backgroundColor = '#ffe6e6';
                }

            } catch (error) {
                outputDiv.innerHTML = `è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼:\n${error.message}`;
                outputDiv.style.backgroundColor = '#ffe6e6';
            }
        });
    </script>
</body>
</html>